{"ast":null,"code":"var _jsxFileName = \"/frontend/pages/user/settings.tsx\";\nvar __jsx = React.createElement;\nimport Router from \"next/router\";\nimport React from \"react\";\nimport useSWR, { mutate, trigger } from \"swr\";\nimport SettingsForm from \"../../components/profile/SettingsForm\";\nimport checkLogin from \"../../lib/utils/checkLogin\";\nimport storage from \"../../lib/utils/storage\";\n\nconst Settings = ({\n  res\n}) => {\n  const {\n    data: currentUser\n  } = useSWR(\"user\", storage);\n  const isLoggedIn = checkLogin(currentUser);\n\n  if (!isLoggedIn) {\n    if (res) {\n      res.writeHead(302, {\n        Location: \"/\"\n      });\n      res.end();\n    }\n\n    Router.push(`/`);\n  }\n\n  const handleLogout = async e => {\n    e.preventDefault();\n    window.localStorage.removeItem(\"user\");\n    mutate(\"user\", null);\n    Router.push(`/`).then(() => trigger(\"user\"));\n  };\n\n  return __jsx(\"div\", {\n    className: \"settings-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"container page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-6 offset-md-3 col-xs-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 11\n    }\n  }, __jsx(\"h1\", {\n    className: \"text-xs-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }\n  }, \"Your Settings\"), __jsx(SettingsForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }), __jsx(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }), __jsx(\"button\", {\n    className: \"btn btn-outline-danger\",\n    onClick: handleLogout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }\n  }, \"Or click here to logout.\")))));\n};\n\nSettings.getInitialProps = async ({\n  res\n}) => {\n  return {\n    res\n  };\n};\n\nexport default Settings;","map":{"version":3,"sources":["/frontend/pages/user/settings.tsx"],"names":["Router","React","useSWR","mutate","trigger","SettingsForm","checkLogin","storage","Settings","res","data","currentUser","isLoggedIn","writeHead","Location","end","push","handleLogout","e","preventDefault","window","localStorage","removeItem","then","getInitialProps"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,aAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,IAAiBC,MAAjB,EAAyBC,OAAzB,QAAwC,KAAxC;AAEA,OAAOC,YAAP,MAAyB,uCAAzB;AACA,OAAOC,UAAP,MAAuB,4BAAvB;AACA,OAAOC,OAAP,MAAoB,yBAApB;;AAEA,MAAMC,QAAQ,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAa;AAC5B,QAAM;AAAEC,IAAAA,IAAI,EAAEC;AAAR,MAAwBT,MAAM,CAAC,MAAD,EAASK,OAAT,CAApC;AACA,QAAMK,UAAU,GAAGN,UAAU,CAACK,WAAD,CAA7B;;AAEA,MAAI,CAACC,UAAL,EAAiB;AACf,QAAIH,GAAJ,EAAS;AACPA,MAAAA,GAAG,CAACI,SAAJ,CAAc,GAAd,EAAmB;AACjBC,QAAAA,QAAQ,EAAE;AADO,OAAnB;AAGAL,MAAAA,GAAG,CAACM,GAAJ;AACD;;AACDf,IAAAA,MAAM,CAACgB,IAAP,CAAa,GAAb;AACD;;AAED,QAAMC,YAAY,GAAG,MAAOC,CAAP,IAAa;AAChCA,IAAAA,CAAC,CAACC,cAAF;AACAC,IAAAA,MAAM,CAACC,YAAP,CAAoBC,UAApB,CAA+B,MAA/B;AACAnB,IAAAA,MAAM,CAAC,MAAD,EAAS,IAAT,CAAN;AACAH,IAAAA,MAAM,CAACgB,IAAP,CAAa,GAAb,EAAiBO,IAAjB,CAAsB,MAAMnB,OAAO,CAAC,MAAD,CAAnC;AACD,GALD;;AAOA,SACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EAIE;AAAQ,IAAA,SAAS,EAAC,wBAAlB;AAA2C,IAAA,OAAO,EAAEa,YAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAJF,CADF,CADF,CADF,CADF;AAgBD,CArCD;;AAuCAT,QAAQ,CAACgB,eAAT,GAA2B,OAAO;AAAEf,EAAAA;AAAF,CAAP,KAAmB;AAC5C,SAAO;AACLA,IAAAA;AADK,GAAP;AAGD,CAJD;;AAMA,eAAeD,QAAf","sourcesContent":["import Router from \"next/router\";\nimport React from \"react\";\nimport useSWR, { mutate, trigger } from \"swr\";\n\nimport SettingsForm from \"../../components/profile/SettingsForm\";\nimport checkLogin from \"../../lib/utils/checkLogin\";\nimport storage from \"../../lib/utils/storage\";\n\nconst Settings = ({ res }) => {\n  const { data: currentUser } = useSWR(\"user\", storage);\n  const isLoggedIn = checkLogin(currentUser);\n\n  if (!isLoggedIn) {\n    if (res) {\n      res.writeHead(302, {\n        Location: \"/\",\n      });\n      res.end();\n    }\n    Router.push(`/`);\n  }\n\n  const handleLogout = async (e) => {\n    e.preventDefault();\n    window.localStorage.removeItem(\"user\");\n    mutate(\"user\", null);\n    Router.push(`/`).then(() => trigger(\"user\"));\n  };\n\n  return (\n    <div className=\"settings-page\">\n      <div className=\"container page\">\n        <div className=\"row\">\n          <div className=\"col-md-6 offset-md-3 col-xs-12\">\n            <h1 className=\"text-xs-center\">Your Settings</h1>\n            <SettingsForm />\n            <hr />\n            <button className=\"btn btn-outline-danger\" onClick={handleLogout}>\n              Or click here to logout.\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nSettings.getInitialProps = async ({ res }) => {\n  return {\n    res,\n  };\n};\n\nexport default Settings;\n"]},"metadata":{},"sourceType":"module"}