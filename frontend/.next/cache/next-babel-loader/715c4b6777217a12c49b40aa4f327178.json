{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/frontend/pages/user/settings.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport Router from \"next/router\";\nimport React from \"react\";\nimport useSWR, { mutate, trigger } from \"swr\";\nimport SettingsForm from \"../../components/profile/SettingsForm\";\nimport checkLogin from \"../../lib/utils/checkLogin\";\nimport storage from \"../../lib/utils/storage\";\n\nvar Settings = function Settings(_ref) {\n  _s();\n\n  var res = _ref.res;\n\n  var _useSWR = useSWR(\"user\", storage),\n      currentUser = _useSWR.data;\n\n  var isLoggedIn = checkLogin(currentUser);\n\n  if (!isLoggedIn) {\n    if (res) {\n      res.writeHead(302, {\n        Location: \"/\"\n      });\n      res.end();\n    }\n\n    Router.push(\"/\");\n  }\n\n  var handleLogout = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              window.localStorage.removeItem(\"user\");\n              mutate(\"user\", null);\n              Router.push(\"/\").then(function () {\n                return trigger(\"user\");\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleLogout(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: \"settings-page\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"container page\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-6 offset-md-3 col-xs-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 11\n    }\n  }, __jsx(\"h1\", {\n    className: \"text-xs-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }\n  }, \"Your Settings\"), __jsx(SettingsForm, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }), __jsx(\"hr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }), __jsx(\"button\", {\n    className: \"btn btn-outline-danger\",\n    onClick: handleLogout,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }\n  }, \"Or click here to logout.\")))));\n};\n\n_s(Settings, \"+RIejZTlAMVkYgwaEivkK1j1FCE=\", false, function () {\n  return [useSWR];\n});\n\n_c = Settings;\n\nSettings.getInitialProps = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3) {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            res = _ref3.res;\n            return _context2.abrupt(\"return\", {\n              res: res\n            });\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nexport default Settings;\n\nvar _c;\n\n$RefreshReg$(_c, \"Settings\");","map":{"version":3,"sources":["/frontend/pages/user/settings.tsx"],"names":["Router","React","useSWR","mutate","trigger","SettingsForm","checkLogin","storage","Settings","res","currentUser","data","isLoggedIn","writeHead","Location","end","push","handleLogout","e","preventDefault","window","localStorage","removeItem","then","getInitialProps"],"mappings":";;;;;;;;AAAA,OAAOA,MAAP,MAAmB,aAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,IAAiBC,MAAjB,EAAyBC,OAAzB,QAAwC,KAAxC;AAEA,OAAOC,YAAP,MAAyB,uCAAzB;AACA,OAAOC,UAAP,MAAuB,4BAAvB;AACA,OAAOC,OAAP,MAAoB,yBAApB;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,OAAa;AAAA;;AAAA,MAAVC,GAAU,QAAVA,GAAU;;AAC5B,gBAA8BP,MAAM,CAAC,MAAD,EAASK,OAAT,CAApC;AAAA,MAAcG,WAAd,WAAQC,IAAR;;AACA,MAAMC,UAAU,GAAGN,UAAU,CAACI,WAAD,CAA7B;;AAEA,MAAI,CAACE,UAAL,EAAiB;AACf,QAAIH,GAAJ,EAAS;AACPA,MAAAA,GAAG,CAACI,SAAJ,CAAc,GAAd,EAAmB;AACjBC,QAAAA,QAAQ,EAAE;AADO,OAAnB;AAGAL,MAAAA,GAAG,CAACM,GAAJ;AACD;;AACDf,IAAAA,MAAM,CAACgB,IAAP;AACD;;AAED,MAAMC,YAAY;AAAA,yEAAG,iBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AACnBA,cAAAA,CAAC,CAACC,cAAF;AACAC,cAAAA,MAAM,CAACC,YAAP,CAAoBC,UAApB,CAA+B,MAA/B;AACAnB,cAAAA,MAAM,CAAC,MAAD,EAAS,IAAT,CAAN;AACAH,cAAAA,MAAM,CAACgB,IAAP,MAAiBO,IAAjB,CAAsB;AAAA,uBAAMnB,OAAO,CAAC,MAAD,CAAb;AAAA,eAAtB;;AAJmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZa,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAOA,SACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE,MAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EAIE;AAAQ,IAAA,SAAS,EAAC,wBAAlB;AAA2C,IAAA,OAAO,EAAEA,YAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAJF,CADF,CADF,CADF,CADF;AAgBD,CArCD;;GAAMT,Q;UAC0BN,M;;;KAD1BM,Q;;AAuCNA,QAAQ,CAACgB,eAAT;AAAA,uEAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAASf,YAAAA,GAAT,SAASA,GAAT;AAAA,8CAClB;AACLA,cAAAA,GAAG,EAAHA;AADK,aADkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA3B;;AAAA;AAAA;AAAA;AAAA;;AAMA,eAAeD,QAAf","sourcesContent":["import Router from \"next/router\";\nimport React from \"react\";\nimport useSWR, { mutate, trigger } from \"swr\";\n\nimport SettingsForm from \"../../components/profile/SettingsForm\";\nimport checkLogin from \"../../lib/utils/checkLogin\";\nimport storage from \"../../lib/utils/storage\";\n\nconst Settings = ({ res }) => {\n  const { data: currentUser } = useSWR(\"user\", storage);\n  const isLoggedIn = checkLogin(currentUser);\n\n  if (!isLoggedIn) {\n    if (res) {\n      res.writeHead(302, {\n        Location: \"/\",\n      });\n      res.end();\n    }\n    Router.push(`/`);\n  }\n\n  const handleLogout = async (e) => {\n    e.preventDefault();\n    window.localStorage.removeItem(\"user\");\n    mutate(\"user\", null);\n    Router.push(`/`).then(() => trigger(\"user\"));\n  };\n\n  return (\n    <div className=\"settings-page\">\n      <div className=\"container page\">\n        <div className=\"row\">\n          <div className=\"col-md-6 offset-md-3 col-xs-12\">\n            <h1 className=\"text-xs-center\">Your Settings</h1>\n            <SettingsForm />\n            <hr />\n            <button className=\"btn btn-outline-danger\" onClick={handleLogout}>\n              Or click here to logout.\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nSettings.getInitialProps = async ({ res }) => {\n  return {\n    res,\n  };\n};\n\nexport default Settings;\n"]},"metadata":{},"sourceType":"module"}