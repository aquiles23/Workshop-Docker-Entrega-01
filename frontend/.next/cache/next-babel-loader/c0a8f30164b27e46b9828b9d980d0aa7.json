{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/frontend/components/comment/DeleteButton.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport axios from \"axios\";\nimport { useRouter } from \"next/router\";\nimport useSWR, { trigger } from \"swr\";\nimport { SERVER_BASE_URL } from \"../../lib/utils/constant\";\nimport storage from \"../../lib/utils/storage\";\n\nvar DeleteButton = function DeleteButton(_ref) {\n  _s();\n\n  var commentId = _ref.commentId;\n\n  var _useSWR = useSWR(\"user\", storage),\n      currentUser = _useSWR.data;\n\n  var router = useRouter();\n  var pid = router.query.pid;\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(commentId) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios[\"delete\"](\"\".concat(SERVER_BASE_URL, \"/articles/\").concat(pid, \"/comments/\").concat(commentId), {\n                headers: {\n                  Authorization: \"Token \".concat(currentUser === null || currentUser === void 0 ? void 0 : currentUser.token)\n                }\n              });\n\n            case 2:\n              trigger(\"\".concat(SERVER_BASE_URL, \"/articles/\").concat(pid, \"/comments\"));\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleDelete(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"span\", {\n    className: \"mod-options\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }\n  }, __jsx(\"i\", {\n    className: \"ion-trash-a\",\n    onClick: function onClick() {\n      return handleDelete(commentId);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }));\n};\n\n_s(DeleteButton, \"z2kAO4bAI1j7ZNAc05XiTd69uuI=\", false, function () {\n  return [useSWR, useRouter];\n});\n\n_c = DeleteButton;\nexport default DeleteButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeleteButton\");","map":{"version":3,"sources":["/frontend/components/comment/DeleteButton.tsx"],"names":["axios","useRouter","useSWR","trigger","SERVER_BASE_URL","storage","DeleteButton","commentId","currentUser","data","router","pid","query","handleDelete","headers","Authorization","token"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,MAAP,IAAiBC,OAAjB,QAAgC,KAAhC;AAEA,SAASC,eAAT,QAAgC,0BAAhC;AACA,OAAOC,OAAP,MAAoB,yBAApB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAAmB;AAAA;;AAAA,MAAhBC,SAAgB,QAAhBA,SAAgB;;AACtC,gBAA8BL,MAAM,CAAC,MAAD,EAASG,OAAT,CAApC;AAAA,MAAcG,WAAd,WAAQC,IAAR;;AACA,MAAMC,MAAM,GAAGT,SAAS,EAAxB;AACA,MACWU,GADX,GAEID,MAFJ,CACEE,KADF,CACWD,GADX;;AAIA,MAAME,YAAY;AAAA,yEAAG,iBAAON,SAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACbP,KAAK,UAAL,WACDI,eADC,uBAC2BO,GAD3B,uBAC2CJ,SAD3C,GAEJ;AACEO,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,kBAAWP,WAAX,aAAWA,WAAX,uBAAWA,WAAW,CAAEQ,KAAxB;AADN;AADX,eAFI,CADa;;AAAA;AASnBb,cAAAA,OAAO,WAAIC,eAAJ,uBAAgCO,GAAhC,eAAP;;AATmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZE,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAYA,SACE;AAAM,IAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,SAAS,EAAC,aAAb;AAA2B,IAAA,OAAO,EAAE;AAAA,aAAMA,YAAY,CAACN,SAAD,CAAlB;AAAA,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD,CAxBD;;GAAMD,Y;UAC0BJ,M,EACfD,S;;;KAFXK,Y;AA0BN,eAAeA,YAAf","sourcesContent":["import axios from \"axios\";\nimport { useRouter } from \"next/router\";\nimport useSWR, { trigger } from \"swr\";\n\nimport { SERVER_BASE_URL } from \"../../lib/utils/constant\";\nimport storage from \"../../lib/utils/storage\";\n\nconst DeleteButton = ({ commentId }) => {\n  const { data: currentUser } = useSWR(\"user\", storage);\n  const router = useRouter();\n  const {\n    query: { pid },\n  } = router;\n\n  const handleDelete = async (commentId) => {\n    await axios.delete(\n      `${SERVER_BASE_URL}/articles/${pid}/comments/${commentId}`,\n      {\n        headers: {\n          Authorization: `Token ${currentUser?.token}`,\n        },\n      }\n    );\n    trigger(`${SERVER_BASE_URL}/articles/${pid}/comments`);\n  };\n\n  return (\n    <span className=\"mod-options\">\n      <i className=\"ion-trash-a\" onClick={() => handleDelete(commentId)} />\n    </span>\n  );\n};\n\nexport default DeleteButton;\n"]},"metadata":{},"sourceType":"module"}