{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from \"axios\";\nimport { SERVER_BASE_URL } from \"../utils/constant\";\nvar UserAPI = {\n  current: function () {\n    var _current = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var user, token, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              user = window.localStorage.getItem(\"user\");\n              token = user === null || user === void 0 ? void 0 : user.token;\n              _context.prev = 2;\n              _context.next = 5;\n              return axios.get(\"/user\", {\n                headers: {\n                  Authorization: \"Token \".concat(encodeURIComponent(token))\n                }\n              });\n\n            case 5:\n              response = _context.sent;\n              return _context.abrupt(\"return\", response);\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](2);\n              return _context.abrupt(\"return\", _context.t0.response);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 9]]);\n    }));\n\n    function current() {\n      return _current.apply(this, arguments);\n    }\n\n    return current;\n  }(),\n  login: function () {\n    var _login = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email, password) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.post(\"\".concat(SERVER_BASE_URL, \"/users/login\"), JSON.stringify({\n                user: {\n                  email: email,\n                  password: password\n                }\n              }), {\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                }\n              });\n\n            case 3:\n              response = _context2.sent;\n              return _context2.abrupt(\"return\", response);\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              return _context2.abrupt(\"return\", _context2.t0.response);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    function login(_x, _x2) {\n      return _login.apply(this, arguments);\n    }\n\n    return login;\n  }(),\n  register: function () {\n    var _register = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(username, email, password) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.post(\"\".concat(SERVER_BASE_URL, \"/users\"), JSON.stringify({\n                user: {\n                  username: username,\n                  email: email,\n                  password: password\n                }\n              }), {\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                }\n              });\n\n            case 3:\n              response = _context3.sent;\n              return _context3.abrupt(\"return\", response);\n\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](0);\n              return _context3.abrupt(\"return\", _context3.t0.response);\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 7]]);\n    }));\n\n    function register(_x3, _x4, _x5) {\n      return _register.apply(this, arguments);\n    }\n\n    return register;\n  }(),\n  save: function () {\n    var _save = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(user) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return axios.put(\"\".concat(SERVER_BASE_URL, \"/user\"), JSON.stringify({\n                user: user\n              }), {\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                }\n              });\n\n            case 3:\n              response = _context4.sent;\n              return _context4.abrupt(\"return\", response);\n\n            case 7:\n              _context4.prev = 7;\n              _context4.t0 = _context4[\"catch\"](0);\n              return _context4.abrupt(\"return\", _context4.t0.response);\n\n            case 10:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 7]]);\n    }));\n\n    function save(_x6) {\n      return _save.apply(this, arguments);\n    }\n\n    return save;\n  }(),\n  follow: function () {\n    var _follow = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(username) {\n      var user, token, response;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              user = JSON.parse(window.localStorage.getItem(\"user\"));\n              token = user === null || user === void 0 ? void 0 : user.token;\n              _context5.prev = 2;\n              _context5.next = 5;\n              return axios.post(\"\".concat(SERVER_BASE_URL, \"/profiles/\").concat(username, \"/follow\"), {}, {\n                headers: {\n                  Authorization: \"Token \".concat(encodeURIComponent(token))\n                }\n              });\n\n            case 5:\n              response = _context5.sent;\n              return _context5.abrupt(\"return\", response);\n\n            case 9:\n              _context5.prev = 9;\n              _context5.t0 = _context5[\"catch\"](2);\n              return _context5.abrupt(\"return\", _context5.t0.response);\n\n            case 12:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[2, 9]]);\n    }));\n\n    function follow(_x7) {\n      return _follow.apply(this, arguments);\n    }\n\n    return follow;\n  }(),\n  unfollow: function () {\n    var _unfollow = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(username) {\n      var user, token, response;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              user = JSON.parse(window.localStorage.getItem(\"user\"));\n              token = user === null || user === void 0 ? void 0 : user.token;\n              _context6.prev = 2;\n              _context6.next = 5;\n              return axios[\"delete\"](\"\".concat(SERVER_BASE_URL, \"/profiles/\").concat(username, \"/follow\"), {\n                headers: {\n                  Authorization: \"Token \".concat(encodeURIComponent(token))\n                }\n              });\n\n            case 5:\n              response = _context6.sent;\n              return _context6.abrupt(\"return\", response);\n\n            case 9:\n              _context6.prev = 9;\n              _context6.t0 = _context6[\"catch\"](2);\n              return _context6.abrupt(\"return\", _context6.t0.response);\n\n            case 12:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[2, 9]]);\n    }));\n\n    function unfollow(_x8) {\n      return _unfollow.apply(this, arguments);\n    }\n\n    return unfollow;\n  }(),\n  get: function () {\n    var _get = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(username) {\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              return _context7.abrupt(\"return\", axios.get(\"\".concat(SERVER_BASE_URL, \"/profiles/\").concat(username)));\n\n            case 1:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    function get(_x9) {\n      return _get.apply(this, arguments);\n    }\n\n    return get;\n  }()\n};\nexport default UserAPI;","map":{"version":3,"sources":["/frontend/lib/api/user.ts"],"names":["axios","SERVER_BASE_URL","UserAPI","current","user","window","localStorage","getItem","token","get","headers","Authorization","encodeURIComponent","response","login","email","password","post","JSON","stringify","register","username","save","put","follow","parse","unfollow"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,eAAT,QAAgC,mBAAhC;AAEA,IAAMC,OAAO,GAAG;AACdC,EAAAA,OAAO;AAAA,4EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AACDC,cAAAA,IADC,GACWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CADX;AAEDC,cAAAA,KAFC,GAEOJ,IAFP,aAEOA,IAFP,uBAEOA,IAAI,CAAEI,KAFb;AAAA;AAAA;AAAA,qBAIkBR,KAAK,CAACS,GAAN,UAAmB;AACxCC,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,kBAAWC,kBAAkB,CAACJ,KAAD,CAA7B;AADN;AAD+B,eAAnB,CAJlB;;AAAA;AAICK,cAAAA,QAJD;AAAA,+CASEA,QATF;;AAAA;AAAA;AAAA;AAAA,+CAWE,YAAMA,QAXR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KADO;AAedC,EAAAA,KAAK;AAAA,0EAAE,kBAAOC,KAAP,EAAcC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEoBhB,KAAK,CAACiB,IAAN,WAClBhB,eADkB,mBAErBiB,IAAI,CAACC,SAAL,CAAe;AAAEf,gBAAAA,IAAI,EAAE;AAAEW,kBAAAA,KAAK,EAALA,KAAF;AAASC,kBAAAA,QAAQ,EAARA;AAAT;AAAR,eAAf,CAFqB,EAGrB;AACEN,gBAAAA,OAAO,EAAE;AACP,kCAAgB;AADT;AADX,eAHqB,CAFpB;;AAAA;AAEGG,cAAAA,QAFH;AAAA,gDAWIA,QAXJ;;AAAA;AAAA;AAAA;AAAA,gDAaI,aAAMA,QAbV;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KAfS;AA+BdO,EAAAA,QAAQ;AAAA,6EAAE,kBAAOC,QAAP,EAAiBN,KAAjB,EAAwBC,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEiBhB,KAAK,CAACiB,IAAN,WAClBhB,eADkB,aAErBiB,IAAI,CAACC,SAAL,CAAe;AAAEf,gBAAAA,IAAI,EAAE;AAAEiB,kBAAAA,QAAQ,EAARA,QAAF;AAAYN,kBAAAA,KAAK,EAALA,KAAZ;AAAmBC,kBAAAA,QAAQ,EAARA;AAAnB;AAAR,eAAf,CAFqB,EAGrB;AACEN,gBAAAA,OAAO,EAAE;AACP,kCAAgB;AADT;AADX,eAHqB,CAFjB;;AAAA;AAEAG,cAAAA,QAFA;AAAA,gDAWCA,QAXD;;AAAA;AAAA;AAAA;AAAA,gDAaC,aAAMA,QAbP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KA/BM;AA+CdS,EAAAA,IAAI;AAAA,yEAAE,kBAAOlB,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEqBJ,KAAK,CAACuB,GAAN,WAClBtB,eADkB,YAErBiB,IAAI,CAACC,SAAL,CAAe;AAAEf,gBAAAA,IAAI,EAAJA;AAAF,eAAf,CAFqB,EAGrB;AACEM,gBAAAA,OAAO,EAAE;AACP,kCAAgB;AADT;AADX,eAHqB,CAFrB;;AAAA;AAEIG,cAAAA,QAFJ;AAAA,gDAWKA,QAXL;;AAAA;AAAA;AAAA;AAAA,gDAaK,aAAMA,QAbX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KA/CU;AA+DdW,EAAAA,MAAM;AAAA,2EAAE,kBAAOH,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACAjB,cAAAA,IADA,GACYc,IAAI,CAACO,KAAL,CAAWpB,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CADZ;AAEAC,cAAAA,KAFA,GAEQJ,IAFR,aAEQA,IAFR,uBAEQA,IAAI,CAAEI,KAFd;AAAA;AAAA;AAAA,qBAImBR,KAAK,CAACiB,IAAN,WAClBhB,eADkB,uBACUoB,QADV,cAErB,EAFqB,EAGrB;AACEX,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,kBAAWC,kBAAkB,CAACJ,KAAD,CAA7B;AADN;AADX,eAHqB,CAJnB;;AAAA;AAIEK,cAAAA,QAJF;AAAA,gDAaGA,QAbH;;AAAA;AAAA;AAAA;AAAA,gDAeG,aAAMA,QAfT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KA/DQ;AAiFda,EAAAA,QAAQ;AAAA,6EAAE,kBAAOL,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACFjB,cAAAA,IADE,GACUc,IAAI,CAACO,KAAL,CAAWpB,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CADV;AAEFC,cAAAA,KAFE,GAEMJ,IAFN,aAEMA,IAFN,uBAEMA,IAAI,CAAEI,KAFZ;AAAA;AAAA;AAAA,qBAIiBR,KAAK,UAAL,WAClBC,eADkB,uBACUoB,QADV,cAErB;AACEX,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,kBAAWC,kBAAkB,CAACJ,KAAD,CAA7B;AADN;AADX,eAFqB,CAJjB;;AAAA;AAIAK,cAAAA,QAJA;AAAA,gDAYCA,QAZD;;AAAA;AAAA;AAAA;AAAA,gDAcC,aAAMA,QAdP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KAjFM;AAkGdJ,EAAAA,GAAG;AAAA,wEAAE,kBAAOY,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA,gDAAoBrB,KAAK,CAACS,GAAN,WAAaR,eAAb,uBAAyCoB,QAAzC,EAApB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAlGW,CAAhB;AAqGA,eAAenB,OAAf","sourcesContent":["import axios from \"axios\";\n\nimport { SERVER_BASE_URL } from \"../utils/constant\";\n\nconst UserAPI = {\n  current: async () => {\n    const user: any = window.localStorage.getItem(\"user\");\n    const token = user?.token;\n    try {\n      const response = await axios.get(`/user`, {\n        headers: {\n          Authorization: `Token ${encodeURIComponent(token)}`,\n        },\n      });\n      return response;\n    } catch (error) {\n      return error.response;\n    }\n  },\n  login: async (email, password) => {\n    try {\n      const response = await axios.post(\n        `${SERVER_BASE_URL}/users/login`,\n        JSON.stringify({ user: { email, password } }),\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n      return response;\n    } catch (error) {\n      return error.response;\n    }\n  },\n  register: async (username, email, password) => {\n    try {\n      const response = await axios.post(\n        `${SERVER_BASE_URL}/users`,\n        JSON.stringify({ user: { username, email, password } }),\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n      return response;\n    } catch (error) {\n      return error.response;\n    }\n  },\n  save: async (user) => {\n    try {\n      const response = await axios.put(\n        `${SERVER_BASE_URL}/user`,\n        JSON.stringify({ user }),\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n      return response;\n    } catch (error) {\n      return error.response;\n    }\n  },\n  follow: async (username) => {\n    const user: any = JSON.parse(window.localStorage.getItem(\"user\"));\n    const token = user?.token;\n    try {\n      const response = await axios.post(\n        `${SERVER_BASE_URL}/profiles/${username}/follow`,\n        {},\n        {\n          headers: {\n            Authorization: `Token ${encodeURIComponent(token)}`,\n          },\n        }\n      );\n      return response;\n    } catch (error) {\n      return error.response;\n    }\n  },\n  unfollow: async (username) => {\n    const user: any = JSON.parse(window.localStorage.getItem(\"user\"));\n    const token = user?.token;\n    try {\n      const response = await axios.delete(\n        `${SERVER_BASE_URL}/profiles/${username}/follow`,\n        {\n          headers: {\n            Authorization: `Token ${encodeURIComponent(token)}`,\n          },\n        }\n      );\n      return response;\n    } catch (error) {\n      return error.response;\n    }\n  },\n  get: async (username) => axios.get(`${SERVER_BASE_URL}/profiles/${username}`),\n};\n\nexport default UserAPI;\n"]},"metadata":{},"sourceType":"module"}