{"ast":null,"code":"var _jsxFileName = \"/frontend/pages/editor/new.tsx\";\nvar __jsx = React.createElement;\nimport Router from \"next/router\";\nimport React from \"react\";\nimport useSWR from \"swr\";\nimport ListErrors from \"../../components/common/ListErrors\";\nimport TagInput from \"../../components/editor/TagInput\";\nimport ArticleAPI from \"../../lib/api/article\";\nimport storage from \"../../lib/utils/storage\";\nimport editorReducer from \"../../lib/utils/editorReducer\";\n\nconst PublishArticleEditor = () => {\n  const initialState = {\n    title: \"\",\n    description: \"\",\n    body: \"\",\n    tagList: []\n  };\n  const [isLoading, setLoading] = React.useState(false);\n  const [errors, setErrors] = React.useState([]);\n  const [posting, dispatch] = React.useReducer(editorReducer, initialState);\n  const {\n    data: currentUser\n  } = useSWR(\"user\", storage);\n\n  const handleTitle = e => dispatch({\n    type: \"SET_TITLE\",\n    text: e.target.value\n  });\n\n  const handleDescription = e => dispatch({\n    type: \"SET_DESCRIPTION\",\n    text: e.target.value\n  });\n\n  const handleBody = e => dispatch({\n    type: \"SET_BODY\",\n    text: e.target.value\n  });\n\n  const addTag = tag => dispatch({\n    type: \"ADD_TAG\",\n    tag: tag\n  });\n\n  const removeTag = tag => dispatch({\n    type: \"REMOVE_TAG\",\n    tag: tag\n  });\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    const {\n      data,\n      status\n    } = await ArticleAPI.create(posting, currentUser === null || currentUser === void 0 ? void 0 : currentUser.token);\n    setLoading(false);\n\n    if (status !== 200) {\n      setErrors(data.errors);\n    }\n\n    Router.push(\"/\");\n  };\n\n  return __jsx(\"div\", {\n    className: \"editor-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"container page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-10 offset-md-1 col-xs-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }, __jsx(ListErrors, {\n    errors: errors,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }), __jsx(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, __jsx(\"fieldset\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  }, __jsx(\"fieldset\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, __jsx(\"input\", {\n    className: \"form-control form-control-lg\",\n    type: \"text\",\n    placeholder: \"Article Title\",\n    value: posting.title,\n    onChange: handleTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 19\n    }\n  })), __jsx(\"fieldset\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, __jsx(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    placeholder: \"What's this article about?\",\n    value: posting.description,\n    onChange: handleDescription,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }\n  })), __jsx(\"fieldset\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, __jsx(\"textarea\", {\n    className: \"form-control\",\n    rows: 8,\n    placeholder: \"Write your article (in markdown)\",\n    value: posting.body,\n    onChange: handleBody,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 19\n    }\n  })), __jsx(TagInput, {\n    tagList: posting.tagList,\n    addTag: addTag,\n    removeTag: removeTag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }), __jsx(\"button\", {\n    className: \"btn btn-lg pull-xs-right btn-primary\",\n    type: \"button\",\n    disabled: isLoading,\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, \"Publish Article\")))))));\n};\n\nexport default PublishArticleEditor;","map":{"version":3,"sources":["/frontend/pages/editor/new.tsx"],"names":["Router","React","useSWR","ListErrors","TagInput","ArticleAPI","storage","editorReducer","PublishArticleEditor","initialState","title","description","body","tagList","isLoading","setLoading","useState","errors","setErrors","posting","dispatch","useReducer","data","currentUser","handleTitle","e","type","text","target","value","handleDescription","handleBody","addTag","tag","removeTag","handleSubmit","preventDefault","status","create","token","push"],"mappings":"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","sourcesContent":["import Router from \"next/router\";\nimport React from \"react\";\nimport useSWR from \"swr\";\n\nimport ListErrors from \"../../components/common/ListErrors\";\nimport TagInput from \"../../components/editor/TagInput\";\nimport ArticleAPI from \"../../lib/api/article\";\nimport storage from \"../../lib/utils/storage\";\nimport editorReducer from \"../../lib/utils/editorReducer\";\n\nconst PublishArticleEditor = () => {\n  const initialState = {\n    title: \"\",\n    description: \"\",\n    body: \"\",\n    tagList: [],\n  };\n\n  const [isLoading, setLoading] = React.useState(false);\n  const [errors, setErrors] = React.useState([]);\n  const [posting, dispatch] = React.useReducer(editorReducer, initialState);\n  const { data: currentUser } = useSWR(\"user\", storage);\n\n  const handleTitle = (e) =>\n    dispatch({ type: \"SET_TITLE\", text: e.target.value });\n  const handleDescription = (e) =>\n    dispatch({ type: \"SET_DESCRIPTION\", text: e.target.value });\n  const handleBody = (e) =>\n    dispatch({ type: \"SET_BODY\", text: e.target.value });\n  const addTag = (tag) => dispatch({ type: \"ADD_TAG\", tag: tag });\n  const removeTag = (tag) => dispatch({ type: \"REMOVE_TAG\", tag: tag });\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    const { data, status } = await ArticleAPI.create(\n      posting,\n      currentUser?.token\n    );\n\n    setLoading(false);\n\n    if (status !== 200) {\n      setErrors(data.errors);\n    }\n\n    Router.push(\"/\");\n  };\n\n  return (\n    <div className=\"editor-page\">\n      <div className=\"container page\">\n        <div className=\"row\">\n          <div className=\"col-md-10 offset-md-1 col-xs-12\">\n            <ListErrors errors={errors} />\n            <form>\n              <fieldset>\n                <fieldset className=\"form-group\">\n                  <input\n                    className=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Article Title\"\n                    value={posting.title}\n                    onChange={handleTitle}\n                  />\n                </fieldset>\n\n                <fieldset className=\"form-group\">\n                  <input\n                    className=\"form-control\"\n                    type=\"text\"\n                    placeholder=\"What's this article about?\"\n                    value={posting.description}\n                    onChange={handleDescription}\n                  />\n                </fieldset>\n\n                <fieldset className=\"form-group\">\n                  <textarea\n                    className=\"form-control\"\n                    rows={8}\n                    placeholder=\"Write your article (in markdown)\"\n                    value={posting.body}\n                    onChange={handleBody}\n                  />\n                </fieldset>\n\n                <TagInput\n                  tagList={posting.tagList}\n                  addTag={addTag}\n                  removeTag={removeTag}\n                />\n\n                <button\n                  className=\"btn btn-lg pull-xs-right btn-primary\"\n                  type=\"button\"\n                  disabled={isLoading}\n                  onClick={handleSubmit}\n                >\n                  Publish Article\n                </button>\n              </fieldset>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PublishArticleEditor;\n"]},"metadata":{},"sourceType":"module"}