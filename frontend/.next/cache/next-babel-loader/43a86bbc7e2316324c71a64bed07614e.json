{"ast":null,"code":"var _jsxFileName = \"/frontend/components/article/ArticleActions.tsx\";\nvar __jsx = React.createElement;\nimport Router, { useRouter } from \"next/router\";\nimport React from \"react\";\nimport useSWR, { trigger } from \"swr\";\nimport CustomLink from \"../common/CustomLink\";\nimport checkLogin from \"../../lib/utils/checkLogin\";\nimport ArticleAPI from \"../../lib/api/article\";\nimport { SERVER_BASE_URL } from \"../../lib/utils/constant\";\nimport storage from \"../../lib/utils/storage\";\nimport Maybe from \"../common/Maybe\";\n\nconst ArticleActions = ({\n  article\n}) => {\n  var _article$author;\n\n  const {\n    data: currentUser\n  } = useSWR(\"user\", storage);\n  const isLoggedIn = checkLogin(currentUser);\n  const router = useRouter();\n  const {\n    query: {\n      pid\n    }\n  } = router;\n\n  const handleDelete = async () => {\n    if (!isLoggedIn) return;\n    const result = window.confirm(\"Do you really want to delete it?\");\n    if (!result) return;\n    await ArticleAPI.delete(pid, currentUser === null || currentUser === void 0 ? void 0 : currentUser.token);\n    trigger(`${SERVER_BASE_URL}/articles/${pid}`);\n    Router.push(`/`);\n  };\n\n  const canModify = isLoggedIn && (currentUser === null || currentUser === void 0 ? void 0 : currentUser.username) === (article === null || article === void 0 ? void 0 : (_article$author = article.author) === null || _article$author === void 0 ? void 0 : _article$author.username);\n  return __jsx(Maybe, {\n    test: canModify,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, __jsx(CustomLink, {\n    href: \"/editor/[pid]\",\n    as: `/editor/${article.slug}`,\n    className: \"btn btn-outline-secondary btn-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, __jsx(\"i\", {\n    className: \"ion-edit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }), \" Edit Article\"), __jsx(\"button\", {\n    className: \"btn btn-outline-danger btn-sm\",\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, __jsx(\"i\", {\n    className: \"ion-trash-a\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }), \" Delete Article\")));\n};\n\nexport default ArticleActions;","map":{"version":3,"sources":["/frontend/components/article/ArticleActions.tsx"],"names":["Router","useRouter","React","useSWR","trigger","CustomLink","checkLogin","ArticleAPI","SERVER_BASE_URL","storage","Maybe","ArticleActions","article","data","currentUser","isLoggedIn","router","query","pid","handleDelete","result","window","confirm","delete","token","push","canModify","username","author","slug"],"mappings":";;AAAA,OAAOA,MAAP,IAAiBC,SAAjB,QAAkC,aAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,IAAiBC,OAAjB,QAAgC,KAAhC;AAEA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,OAAOC,UAAP,MAAuB,4BAAvB;AACA,OAAOC,UAAP,MAAuB,uBAAvB;AACA,SAASC,eAAT,QAAgC,0BAAhC;AACA,OAAOC,OAAP,MAAoB,yBAApB;AACA,OAAOC,KAAP,MAAkB,iBAAlB;;AAEA,MAAMC,cAAc,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAAA;;AACtC,QAAM;AAAEC,IAAAA,IAAI,EAAEC;AAAR,MAAwBX,MAAM,CAAC,MAAD,EAASM,OAAT,CAApC;AACA,QAAMM,UAAU,GAAGT,UAAU,CAACQ,WAAD,CAA7B;AACA,QAAME,MAAM,GAAGf,SAAS,EAAxB;AACA,QAAM;AACJgB,IAAAA,KAAK,EAAE;AAAEC,MAAAA;AAAF;AADH,MAEFF,MAFJ;;AAIA,QAAMG,YAAY,GAAG,YAAY;AAC/B,QAAI,CAACJ,UAAL,EAAiB;AAEjB,UAAMK,MAAM,GAAGC,MAAM,CAACC,OAAP,CAAe,kCAAf,CAAf;AAEA,QAAI,CAACF,MAAL,EAAa;AAEb,UAAMb,UAAU,CAACgB,MAAX,CAAkBL,GAAlB,EAAuBJ,WAAvB,aAAuBA,WAAvB,uBAAuBA,WAAW,CAAEU,KAApC,CAAN;AACApB,IAAAA,OAAO,CAAE,GAAEI,eAAgB,aAAYU,GAAI,EAApC,CAAP;AACAlB,IAAAA,MAAM,CAACyB,IAAP,CAAa,GAAb;AACD,GAVD;;AAYA,QAAMC,SAAS,GACbX,UAAU,IAAI,CAAAD,WAAW,SAAX,IAAAA,WAAW,WAAX,YAAAA,WAAW,CAAEa,QAAb,OAA0Bf,OAA1B,aAA0BA,OAA1B,0CAA0BA,OAAO,CAAEgB,MAAnC,oDAA0B,gBAAiBD,QAA3C,CADhB;AAGA,SACE,MAAC,KAAD;AAAO,IAAA,IAAI,EAAED,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AACE,IAAA,IAAI,EAAC,eADP;AAEE,IAAA,EAAE,EAAG,WAAUd,OAAO,CAACiB,IAAK,EAF9B;AAGE,IAAA,SAAS,EAAC,kCAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKE;AAAG,IAAA,SAAS,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,kBADF,EASE;AACE,IAAA,SAAS,EAAC,+BADZ;AAEE,IAAA,OAAO,EAAEV,YAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AAAG,IAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,oBATF,CADF,CADF;AAoBD,CA3CD;;AA6CA,eAAeR,cAAf","sourcesContent":["import Router, { useRouter } from \"next/router\";\nimport React from \"react\";\nimport useSWR, { trigger } from \"swr\";\n\nimport CustomLink from \"../common/CustomLink\";\nimport checkLogin from \"../../lib/utils/checkLogin\";\nimport ArticleAPI from \"../../lib/api/article\";\nimport { SERVER_BASE_URL } from \"../../lib/utils/constant\";\nimport storage from \"../../lib/utils/storage\";\nimport Maybe from \"../common/Maybe\";\n\nconst ArticleActions = ({ article }) => {\n  const { data: currentUser } = useSWR(\"user\", storage);\n  const isLoggedIn = checkLogin(currentUser);\n  const router = useRouter();\n  const {\n    query: { pid },\n  } = router;\n\n  const handleDelete = async () => {\n    if (!isLoggedIn) return;\n\n    const result = window.confirm(\"Do you really want to delete it?\");\n\n    if (!result) return;\n\n    await ArticleAPI.delete(pid, currentUser?.token);\n    trigger(`${SERVER_BASE_URL}/articles/${pid}`);\n    Router.push(`/`);\n  };\n\n  const canModify =\n    isLoggedIn && currentUser?.username === article?.author?.username;\n\n  return (\n    <Maybe test={canModify}>\n      <span>\n        <CustomLink\n          href=\"/editor/[pid]\"\n          as={`/editor/${article.slug}`}\n          className=\"btn btn-outline-secondary btn-sm\"\n        >\n          <i className=\"ion-edit\" /> Edit Article\n        </CustomLink>\n\n        <button\n          className=\"btn btn-outline-danger btn-sm\"\n          onClick={handleDelete}\n        >\n          <i className=\"ion-trash-a\" /> Delete Article\n        </button>\n      </span>\n    </Maybe>\n  );\n};\n\nexport default ArticleActions;\n"]},"metadata":{},"sourceType":"module"}